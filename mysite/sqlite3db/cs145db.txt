drop table products_item;
drop table products_user;
drop table products_tracklist;

CREATE TABLE "products_item" (
    "id" integer NOT NULL PRIMARY KEY,
    "product_id" varchar(20) NOT NULL,
    "store" varchar(10) NOT NULL,
    "name" varchar(30) NOT NULL,
    "price" decimal NOT NULL,
    "url" varchar(200) NOT NULL,
    "price_date" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE (product_id, store)
);

CREATE TABLE "products_user" (
    "id" integer NOT NULL PRIMARY KEY,
    "username" varchar(30) NOT NULL,
    "email" varchar(75) NOT NULL,
    "password" varchar(10) NOT NULL
);

CREATE TABLE "products_tracklist" (
    "id" integer NOT NULL PRIMARY KEY,
    "user_id" integer NOT NULL REFERENCES "products_user" ("id"),
    "item_id" integer NOT NULL REFERENCES "products_item" ("id")
);
commit;